(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{1120:function(e,t,a){"use strict";a.r(t);var n=a(26),l=a(27),c=a(29),s=a(28),o=a(30),r=a(0),i=a.n(r),m=a(36),u=a(564),d=a(131),p=a(37),v=a(264),b=a(13),f=a(10),h=a(132),E=a.n(h),O=a(45),y=a(24),j=function(e){var t=e.leave,a=e.handleOpen,n=e.cancelLeave,l=t.status,c=l.charAt(0),s="";return"Approved"===l?s="green-A200":"Pending"===l?s="blue":"Rejected"===l?s="red-500":"Cancelled Request"===l&&(s="red-100"),i.a.createElement("div",{className:"list-item b-l b-l-2x b-".concat(s)},i.a.createElement("div",{className:"list-left"},i.a.createElement("span",{className:"w-40 avatar ".concat(s)},c)),i.a.createElement("div",{className:"list-body"},i.a.createElement("div",{className:"pull-right text-muted text-xs"}),i.a.createElement("div",null,i.a.createElement("span",{className:"_500"},"Status : ",t.status)),i.a.createElement("div",null,i.a.createElement("span",{className:"_500"},"Apply on : ",t.applied_on)),i.a.createElement("div",null,i.a.createElement("span",{className:"_500"},"From ",t.from_date," to ",t.to_date),"\xa0\xa0\xa0",i.a.createElement("span",{className:"label cyan"},t.no_of_days," Day"),i.a.createElement("span",{className:"label cyan m-l-xs",onClick:function(){return n(t.user_Id,t.from_date)}},"Cancel")),i.a.createElement("div",{className:"text-ellipsis text-muted text-sm"},"Reason : ",t.reason),""!==t.leave_type?i.a.createElement("div",{className:"text-ellipsis text-muted text-sm"},"Leave Type : ",t.leave_type):null,""!==t.late_reason?i.a.createElement("div",{className:"text-ellipsis text-muted text-sm"},"Reason For Late Applying : ",t.late_reason):null,""!==t.comment?i.a.createElement("div",{className:"text-ellipsis text-muted text-sm"},"comment : ",t.comment):null),i.a.createElement("div",{className:"row"},"0"!==t.doc_require?i.a.createElement("div",{className:"col-xs-12 row"},i.a.createElement("button",{onClick:function(){a(t.id)},className:"btn btn-info btn-responsive btn-res col-xs-2"},"Upload Leave Document"),""===t.doc_link?null:i.a.createElement("div",null,i.a.createElement("form",{method:"get",target:"_blank",action:t.doc_link},i.a.createElement("button",{className:"btn btn-primary btn-responsive btn-res col-xs-2"},"View Document"))),i.a.createElement("div",{className:"col-xs-12 row"},i.a.createElement("small",{className:"uploadnotic"},"* Upload file size should be less than 1 MB"))):null))},N=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).state={open:!1,id:"",user_token:""},a.cancelLeave=a.cancelLeave.bind(Object(b.a)(Object(b.a)(a))),a.handleOpen=a.handleOpen.bind(Object(b.a)(Object(b.a)(a))),a.handleClose=a.handleClose.bind(Object(b.a)(Object(b.a)(a))),a.callUpdateDocuments=a.callUpdateDocuments.bind(Object(b.a)(Object(b.a)(a))),a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({user_token:Object(p.c)()})}},{key:"cancelLeave",value:function(e,t){this.props.onCancelLeave(e,t).then(function(e){Object(O.b)(e)}).catch(function(e){Object(O.b)(e)})}},{key:"handleOpen",value:function(e){this.setState({open:!0,id:e})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"callUpdateDocuments",value:function(e){var t=!1;""===this.refs.file.value&&(t=!0,Object(O.b)("Please select a file")),t&&e.preventDefault()}},{key:"render",value:function(){var e=this,t=window.location.href,a=f.map(this.props.userLeaves.leaves,function(t,a){return i.a.createElement(j,{key:a,leave:t,handleOpen:e.handleOpen,cancelLeave:e.cancelLeave})});return i.a.createElement("div",{className:"row"},i.a.createElement(E.a,{title:"Upload Leave Document",modal:!1,open:this.state.open,onRequestClose:this.handleClose,contentClassName:"dialog-content",autoScrollBodyContent:!0},i.a.createElement("div",null,i.a.createElement("form",{action:y.a.upload_leave_url,method:"POST",encType:"multipart/form-data"},i.a.createElement("input",{type:"hidden",name:"token",value:this.state.user_token}),i.a.createElement("input",{type:"hidden",name:"leaveid",value:this.state.id}),i.a.createElement("input",{type:"hidden",name:"page_url",value:t}),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Attachment"),i.a.createElement("input",{type:"file",className:"form-control",ref:"file",name:"docProof"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("input",{type:"submit",name:"submit",value:"Upload",className:"col-xs-12 md-btn md-raised indigo",onClick:function(t){e.callUpdateDocuments(t)}}))))),i.a.createElement("div",{className:"row-col"},i.a.createElement("div",{className:"list white"},a)))}}]),t}(i.a.Component),_=a(5),g=a(6),L=(a(136),a(12)),w=a(2),x=a(33);function k(){return function(e,t){return new Promise(function(t,a){e(Object(x.b)()),Object(L.b)("POST","",{action:"get_my_leaves"}).then(function(t){var a;e(Object(x.a)()),0==t.error?e((a=t.data,Object(g.a)(w.tb)(a))):e((t.data.message,Object(g.a)(w.rb)([])))},function(t){e(Object(x.a)()),e((t.data.message,Object(g.a)(w.sb)("Error Occurs !!")))})})}}function C(e,t){return function(a,n){return new Promise(function(n,l){a(Object(x.b)()),function(e,t){return Object(L.b)("POST","",{action:"cancel_applied_leave",user_id:e,date:t})}(e,t).then(function(e){a(Object(x.a)()),0==e.error?a(k()):l(e.data.message)},function(e){a(Object(x.a)()),l(e.data.message)})})}}var S=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).props.onIsAlreadyLogin(),a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.props.onMyLeavesList()}},{key:"componentWillReceiveProps",value:function(e){window.scrollTo(0,0);var t=Object(p.e)(this.props.location.pathname,e.loggedUser);t.status&&this.props.history.push(t.redirectTo)}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(d.a,this.props),i.a.createElement("div",{id:"content",className:"app-content box-shadow-z0",role:"main"},i.a.createElement(v.a,{pageTitle:"My Leaves",showLoading:this.props.frontend.show_loading}),i.a.createElement("div",{className:"app-body",id:"view"},i.a.createElement("div",{className:"padding"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement(N,this.props)))))))}}]),t}(i.a.Component);var P=Object(m.b)(function(e){return{frontend:e.frontend.toJS(),loggedUser:e.logged_user.userLogin,userLeaves:e.userLeaves.toJS(),applyLeave:e.applyLeave.toJS()}},function(e){return{onIsAlreadyLogin:function(){return e(_.isAlreadyLogin())},onMyLeavesList:function(){return e(k())},onCancelLeave:function(t,a){return e(C(t,a))}}})(S),U=Object(u.a)(P);t.default=U}}]);
//# sourceMappingURL=57.e4b1a99f.chunk.js.map