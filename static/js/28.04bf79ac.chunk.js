(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1103:function(e,a,t){"use strict";t.r(a);var n=t(25),r=t(26),i=t(29),c=t(27),o=t(28),s=t(12),l=t(0),m=t.n(l),u=t(36),d=t(1075),y=t(43),f=t(122),p=t(37),g=t(253),h=t(1),E=t.n(h),k=t(658),v=function(e){var a=e.workingHoursSummary,t=e.onWorkingHoursChange,n=e.onWorkingHoursSummary,r=function(e){"previous"===e?n(a.previousMonth.year,a.previousMonth.month):"next"===e&&n(a.nextMonth.year,a.nextMonth.month)};return m.a.createElement("div",null,m.a.createElement("div",{id:"content",className:"app-content box-shadow-z0",role:"main"},m.a.createElement("div",{className:"app-body",id:"view"},m.a.createElement("div",null,m.a.createElement("div",{className:"fullcalendar fc fc-ltr fc-unthemed"},m.a.createElement("div",{className:"fc-toolbar"},m.a.createElement("div",{className:"fc-left"},m.a.createElement("button",{type:"button",className:"fc-prev-button fc-button fc-state-default fc-corner-left fc-corner-right",onClick:function(){return r("previous")}},m.a.createElement("span",{className:"fc-icon fc-icon-left-single-arrow"}))),m.a.createElement("div",{className:"fc-right"},m.a.createElement("button",{type:"button",className:"fc-next-button fc-button fc-state-default fc-corner-left fc-corner-right",onClick:function(){return r("next")}},m.a.createElement("span",{className:"fc-icon fc-icon-right-single-arrow"}))),m.a.createElement("div",{className:"fc-center"},m.a.createElement("h2",null,a.monthName,"-",a.year)),m.a.createElement("div",{className:"fc-clear"})),m.a.createElement("br",null),m.a.createElement("div",{className:"fc-view-container"},m.a.createElement("div",{className:"fc-view fc-month-view fc-basic-view"},m.a.createElement("div",{className:"fc-body"},m.a.createElement("div",{className:"fc-widget-content"},m.a.createElement("div",{className:"fc-day-grid-container"},m.a.createElement("div",{className:"fc-day-grid"},m.a.createElement(k.a,{month:a.monthSummary,onWorkingHoursChange:t}))))))))))))};v.PropTypes={workingHoursSummary:E.a.shape({monthSummary:E.a.array.isRequired,previousMonth:E.a.object.isRequired,nextMonth:E.a.object.isRequired,monthName:E.a.string.isRequired,year:E.a.number.isRequired}).isRequired,onWorkingHoursChange:E.a.func.isRequired,onWorkingHoursSummary:E.a.func.isRequired};var b=v,_=t(5),w=t(1115),N=t(9),H=t.n(N),S=t(11),D=t(2),O=t(31);function W(e){return Object(w.a)(D.L)(e)}function j(e,a){return function(t,n){return new Promise(function(n,r){t(Object(O.b)()),function(e,a){return Object(S.b)("POST","",{action:"working_hours_summary",year:e,month:a})}(e,a).then(function(e){var a;t(Object(O.a)()),0===e.error?t((a=e.data,Object(w.a)(D.gc)(a))):t(W({}))},function(e){t(Object(O.a)()),t(W({}))})})}}function x(e,a){return function(t,n){return H.a.isEmpty(e)?Promise.reject("date is empty"):H.a.isEmpty(a)?Promise.reject("time is empty"):new Promise(function(n,r){t(Object(O.b)()),function(e,a){return Object(S.b)("POST","",{action:"update_day_working_hours",date:e,time:a})}(e,a).then(function(e){var a;t(Object(O.a)()),0===e.error?t(j(e.data.monthYear.year,e.data.monthYear.month)):t((a=e.data.message,Object(w.a)(D.j)(a)))},function(e){var a;t(Object(O.a)()),t((a="",Object(w.a)(D.U)(a)))})})}}var R=function(e){function a(e){var t;return Object(n.a)(this,a),(t=Object(i.a)(this,Object(c.a)(a).call(this,e))).props.onIsAlreadyLogin(),t.state={defaultUserDisplay:"",daysummary_userid:"",daysummary_date:""},t.onWorkingHoursChange=t.onWorkingHoursChange.bind(Object(s.a)(Object(s.a)(t))),t}return Object(o.a)(a,e),Object(r.a)(a,[{key:"componentWillMount",value:function(){var e=new Date,a=e.getFullYear(),t=e.getMonth()+1;this.props.onWorkingHoursSummary(a,t)}},{key:"componentWillReceiveProps",value:function(e){var a=Object(p.e)(this.props.location.pathname,e.loggedUser);a.status&&this.props.history.push(a.redirectTo),""!==e.workingHoursSummary.status_message&&Object(y.b)(e.workingHoursSummary.status_message)}},{key:"onWorkingHoursChange",value:function(e,a){""!==a&&this.props.onUpdateDayWorkingHours(e,a).then(function(e){},function(e){Object(y.b)(e)})}},{key:"render",value:function(){return m.a.createElement("div",null,m.a.createElement(f.a,this.props),m.a.createElement("div",{id:"content",className:"app-content box-shadow-z0",role:"main"},m.a.createElement(g.a,{pageTitle:"Manage Working Hours",showLoading:this.props.frontend.show_loading}),m.a.createElement("div",{className:"app-body",id:"view"},m.a.createElement("div",{className:"padding"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-md-12"},m.a.createElement(b,{workingHoursSummary:this.props.workingHoursSummary,onWorkingHoursChange:this.onWorkingHoursChange,onWorkingHoursSummary:this.props.onWorkingHoursSummary})))))))}}]),a}(m.a.Component);var T=Object(u.b)(function(e){return{frontend:e.frontend.toJS(),loggedUser:e.logged_user.userLogin,userDaySummary:e.userDaySummary.toJS(),workingHoursSummary:e.workingHoursSummary.toJS()}},function(e){return{onIsAlreadyLogin:function(){return e(_.isAlreadyLogin())},onWorkingHoursSummary:function(a,t){return e(j(a,t))},onUpdateDayWorkingHours:function(a,t){return e(x(a,t))}}})(R),q=Object(d.a)(T);a.default=q},658:function(e,a,t){"use strict";var n=t(0),r=t.n(n),i=t(1),c=t.n(i),o=t(9),s=t(40),l=t.n(s),m=function(e){var a=e.block,t=e.classname,n=e.dataToDisplay,i=e.time,c=e.title,o=e.officeTime,s="";return"type1"===a?s=r.a.createElement("span",null,r.a.createElement("span",{className:"fc-time"},i),r.a.createElement("span",{className:"fc-title"},c,o?r.a.createElement("i",{className:"officetime"},"- ".concat(o," hrs")):"")):"type2"===a&&(s=n),r.a.createElement("div",{className:t},r.a.createElement("div",{className:"fc-content"},s))};m.PropTypes={block:c.a.string.isRequired,classname:c.a.string.isRequired,dataToDisplay:c.a.string.isRequired,time:c.a.string.isRequired,title:c.a.string.isRequired};var u=m,d={timeInputBox:{width:"40px"}},y=function(e){var a=e.dayData,t=(e.classname,e.forEmployeeHours),n=(e.day,e.userid),i=e.showDaySummary,c=e.onWorkingHoursChange;l()(document).ready(function(){l()("input.timepicker").timepicker({minTime:"5:00",maxTime:"12:00",timeFormat:"h:i",step:10})});var o=a,s=o.office_working_hours,m="",y="fc-day-grid-event fc-h-event fc-event fc-start fc-end fc-draggable ",f="",p=o.date,g="dark-white",h=o.total_time+" - Total Work Time";return"-"===o.extra_time_status?f="red":"+"===o.extra_time_status&&(f="green"),1===o.admin_alert&&(p+=" * ",g="indigo",h=o.admin_alert_message),t||"WORKING_DAY"!==o.day_type?t||"NON_WORKING_DAY"!==o.day_type?t||"FUTURE_WORKING_DAY"!==o.day_type?t||"LEAVE_DAY"!==o.day_type?t||"HALF_DAY"!==o.day_type?t&&"WORKING_DAY"===o.day_type?m=r.a.createElement("div",{"data-toggle":"modal"},r.a.createElement(u,{classname:y+"dark-white",block:"type1",time:r.a.createElement("h5",null,o.date),title:o.day,officeTime:o.office_working_hours}),r.a.createElement(u,{classname:y+"dark-white",block:"type1",time:r.a.createElement("h6",null,"Hours : ",s),title:""}),r.a.createElement("div",{className:"fc-day-grid-event fc-h-event fc-event fc-start fc-end dark-white fc-draggable"},r.a.createElement("div",{className:"fc-content"},r.a.createElement("span",{className:"fc-title"},"Change to \xa0:\xa0"),r.a.createElement("span",{className:"fc-time"},r.a.createElement("input",{type:"text",className:"timepicker",style:d.timeInputBox,onBlur:function(e){return c(a.full_date,e.target.value)}}))))):t&&"NON_WORKING_DAY"===o.day_type&&(m=r.a.createElement("div",null,r.a.createElement(u,{classname:y+"yellow",block:"type1",time:r.a.createElement("h5",null,o.date),title:o.day}),r.a.createElement(u,{classname:y+"yellow",block:"type1",time:"Non Working day"}),r.a.createElement(u,{classname:y+"yellow",block:"type1",time:o.day_text,title:""}),r.a.createElement("div",{className:"fc-day-grid-event fc-h-event fc-event fc-start fc-end dark-white fc-draggable"},r.a.createElement("div",{className:"fc-content"},r.a.createElement("span",{className:"fc-title"},"Change to \xa0:\xa0"),r.a.createElement("span",{className:"fc-time"},r.a.createElement("input",{type:"text",className:"timepicker",style:d.timeInputBox,onBlur:function(e){return c(a.full_date,e.target.value)}})))))):m=r.a.createElement("div",null,r.a.createElement(u,{classname:y+"red-100",block:"type1",time:r.a.createElement("h5",null,o.date),title:o.day,officeTime:o.office_working_hours}),r.a.createElement(u,{classname:y+"red-100",block:"type1",time:"Half day",title:""}),r.a.createElement(u,{classname:y+"red-100",block:"type1",time:o.day_text,title:""})):m=r.a.createElement("div",null,r.a.createElement(u,{classname:y+"red",block:"type1",time:r.a.createElement("h5",null,o.date),title:o.day,officeTime:o.office_working_hours}),r.a.createElement(u,{classname:y+"red",block:"type1",time:"On Leave",title:""}),r.a.createElement(u,{classname:y+"red",block:"type1",time:o.day_text,title:""})):m=r.a.createElement("div",null,r.a.createElement(u,{classname:y+"dark-white",block:"type1",time:r.a.createElement("h5",null,o.date),title:o.day,officeTime:o.office_working_hours}),r.a.createElement(u,{classname:y+"dark-white",block:"type1",time:"",title:""}),r.a.createElement(u,{classname:y+"dark-white",block:"type1",dataToDi:!0,splay:o.day_text}),r.a.createElement(u,{classname:y+"dark-white center",block:"type2",dataToDisplay:h})):m=r.a.createElement("div",null,r.a.createElement(u,{classname:y+"yellow",block:"type1",time:r.a.createElement("h5",null,o.date),title:o.day}),r.a.createElement(u,{classname:y+"yellow",block:"type1",time:"Non Working day"}),r.a.createElement(u,{classname:y+"yellow",block:"type1",time:o.day_text})):m=r.a.createElement("div",{"data-toggle":"modal","data-target":"#modalUserDaySummary",onClick:function(){return i(n,a.full_date)}},r.a.createElement(u,{classname:y+g,block:"type1",time:r.a.createElement("h5",null,p),title:o.day,officeTime:o.office_working_hours}),r.a.createElement(u,{classname:y+"dark-white",block:"type1",time:o.in_time+" - "+o.out_time,title:""}),r.a.createElement(u,{classname:y+"dark-white center",block:"type2",dataToDisplay:h}),r.a.createElement(u,{classname:y+f,block:"type1",time:o.extra_time,title:""})),r.a.createElement("div",null,m)};y.PropTypes={classname:c.a.string,forEmployeeHours:c.a.bool,day:c.a.string,userid:c.a.number,showDaySummary:c.a.func,onWorkingHoursChange:c.a.func,dayData:c.a.shape({date:c.a.number.isRequired,day:c.a.string.isRequired,day_type:c.a.string.isRequired,full_date:c.a.string.isRequired,admin_alert:c.a.number,admin_alert_message:c.a.string,day_text:c.a.string,extra_time:c.a.string,in_time:c.a.string,out_time:c.a.string,total_time:c.a.string,office_working_hours:c.a.string,text:c.a.string}).isRequired};var f=y,p=function(e){var a=e.userId,t=e.dayData,n=e.onShowDaySummary,i=e.onWorkingHoursChange,c=function(){var e=l()("#calendar").width(),a=parseInt(e/100);if(a<7&&e%100>0){var t=parseInt(e/a);l()("#calendar .calendar-day").css({width:t+"px"})}else a>=7&&l()("#calendar .calendar-day").css({width:e/7+"px"})};l()(document).ready(function(){l()(window).on("resize",function(){c()}),c()});var o="";return o=a?r.a.createElement(f,{forEmployeeHours:!1,dayData:t,showDaySummary:n,userid:a}):r.a.createElement(f,{forEmployeeHours:!0,dayData:t,onWorkingHoursChange:i}),r.a.createElement("div",{id:"calendarDay",className:"calendar-day"},r.a.createElement("div",{className:"fc-event-container",id:"".concat(t.full_date)},o))};p.PropTypes={dayData:c.a.object.isRequired,userId:c.a.number,onShowDaySummary:c.a.func,onWorkingHoursChange:c.a.func};var g=p,h=function(e){var a=e.userId,t=e.month,n=e.onShowDaySummary,i=e.onWorkingHoursChange,c=o.map(t,function(e,t){return r.a.createElement(g,{key:t,userId:a,dayData:e,onShowDaySummary:n,onWorkingHoursChange:i})});return r.a.createElement("div",{id:"calendar",className:"col-xs-12"},c)};h.PropTypes={userId:c.a.number.isRequired,month:c.a.array.isRequired,onShowDaySummary:c.a.func.isRequired};a.a=h}}]);
//# sourceMappingURL=28.04bf79ac.chunk.js.map