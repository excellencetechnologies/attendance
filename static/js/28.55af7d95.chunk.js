(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1083:function(e,t,a){"use strict";a.r(t);var r=a(25),s=a(26),n=a(29),i=a(27),o=a(28),c=a(12),l=a(0),u=a.n(l),m=a(36),d=a(1073),p=a(43),h=a(123),b=a(254),g=a(37),E=a(126),f=a(261),v=a(1),k=a.n(v),y=a(9),N=a.n(y),j=function(e){var t=e.row;return u.a.createElement("div",{className:"sl-item b-success"},u.a.createElement("div",{className:"sl-icon"},u.a.createElement("i",{className:"fa fa-check"})),u.a.createElement("div",{className:"sl-content"},u.a.createElement("div",null," ",t.working_hours," Hours"),u.a.createElement("div",null," ",t.date," "),u.a.createElement("div",{className:"sl-date text-muted"},"Reason : ",t.reason)))};j.PropTypes={row:k.a.shape({working_hours:k.a.string.isRequired,date:k.a.string.isRequired,reason:k.a.string.isRequired}).isRequired};var U=j,O=function(e){var t=e.displayData,a=N.a.map(t,function(e,t){return u.a.createElement(U,{key:t,row:e})});return u.a.createElement("div",{className:"row box"},u.a.createElement("div",{className:"box-body"},u.a.createElement("div",{className:"streamline b-l m-l"},a)))};O.PropTypes={displayData:k.a.array.isRequired};var w=O,x=a(40),_=a.n(x),D=a(683),W=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(n.a)(this,Object(i.a)(t).call(this,e))).state={userid:"",date:"",working_hours:"",reason:""},a.handleDateChange=a.handleDateChange.bind(Object(c.a)(Object(c.a)(a))),a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){_()(".timepickerInput").timepicker({minTime:"5:00",maxTime:"12:00",timeFormat:"h:i",step:10})}},{key:"handleDateChange",value:function(e){var t=e.format("YYYY-MM-DD");this.setState({date:t})}},{key:"componentWillReceiveProps",value:function(e){this.setState({userid:e.userid})}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"row no-gutter"},u.a.createElement("div",{className:"col-md-6 col-xs-12 b-r"},u.a.createElement("div",{className:"p-a block text-center table-responsive"},u.a.createElement("h6",{className:""},"Select Date"),u.a.createElement(D.Calendar,{onInit:this.handleDateChange,onChange:this.handleDateChange}))),u.a.createElement("div",{className:"col-md-6 col-xs-12 b-r"},u.a.createElement("div",{className:"p-a block text-center"},u.a.createElement("h6",null,"Selected Date"),this.state.date,u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("h6",null,"Select Time"),u.a.createElement("input",{type:"text",className:"timepickerInput",ref:"workingtime",onBlur:function(){return e.setState({working_hours:e.refs.workingtime.value})},value:this.state.working_hours}),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("h6",null,"Enter Reason"),u.a.createElement("input",{type:"text",className:"md-input",ref:"reason",onChange:function(){return e.setState({reason:e.refs.reason.value})},value:this.state.reason}),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("button",{className:"md-btn md-raised indigo",onClick:function(){return e.props.callAddUserWorkingHours(e.state.userid,e.state.date,e.state.working_hours,e.state.reason)}},"Add"))))}}]),t}(u.a.Component),H=a(5),S=a(169),C=a(1112),L=a(11),A=a(2),I=a(31);function P(e){return function(t,a){return new Promise(function(a,r){t(Object(I.b)()),function(e){return Object(L.b)("POST","",{action:"get_managed_user_working_hours",userid:e})}(e).then(function(e){var a;t(Object(I.a)()),0===e.error?t((a=e.data,Object(C.a)(A.Cc)(a))):t(function(e){return Object(C.a)(A.n)(e)}(e.data))},function(e){var a;t(Object(I.a)()),t((a={},Object(C.a)(A.gb)(a)))})})}}function R(e){return Object(C.a)(A.x)(e)}function T(e,t,a,r){return function(s,n){return N.a.isEmpty(t)?Promise.reject("date is empty"):N.a.isEmpty(a)?Promise.reject("Time is empty"):N.a.isEmpty(r)?Promise.reject("Reason is empty"):new Promise(function(n,i){s(Object(I.b)()),function(e,t,a,r){return Object(L.b)("POST","",{action:"add_user_working_hours",userid:e,date:t,working_hours:a,reason:r})}(e,t,a,r).then(function(t){var a;s(Object(I.a)()),0==t.error?(s((a=t.data.message,Object(C.a)(A.Lb)(a))),s(P(e))):s(R(t.data.message))},function(e){s(Object(I.a)()),s(R("error occurs"))})})}}var q=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(n.a)(this,Object(i.a)(t).call(this,e))).props.onIsAlreadyLogin(),a.state={defaultUserDisplay:"",daysummary_userid:"",daysummary_date:""},a.onUserClick=a.onUserClick.bind(Object(c.a)(Object(c.a)(a))),a.onShowDaySummary=a.onShowDaySummary.bind(Object(c.a)(Object(c.a)(a))),a.callAddUserWorkingHours=a.callAddUserWorkingHours.bind(Object(c.a)(Object(c.a)(a))),a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.props.onUsersList()}},{key:"componentWillReceiveProps",value:function(e){var t=Object(g.e)(this.props.location.pathname,e.loggedUser);if(t.status&&this.props.history.push(t.redirectTo),""===this.state.defaultUserDisplay&&e.usersList.users.length>0){var a=e.usersList.users[0].user_Id;this.onUserClick(a)}}},{key:"onUserClick",value:function(e){this.setState({defaultUserDisplay:e}),this.props.onUserWorkingHoursData(e)}},{key:"onShowDaySummary",value:function(e,t){this.setState({daysummary_userid:e,daysummary_date:t}),this.props.onUserDaySummary(e,t)}},{key:"callAddUserWorkingHours",value:function(e,t,a,r){this.props.onAddUserWorkingHours(e,t,a,r).then(function(e){},function(e){Object(p.b)(e)})}},{key:"render",value:function(){var e="";""!==this.props.manageUserWorkingHours.status_message&&(e=u.a.createElement("span",{className:"label label-lg primary pos-rlt m-r-xs"},u.a.createElement("b",{className:"arrow left b-primary"}),this.props.manageUserWorkingHours.status_message));var t="",a="",r="";try{t=this.props.manageUserWorkingHours.userInfo.slack_profile.profile.image_192,a=this.props.manageUserWorkingHours.userInfo.name,r=this.props.manageUserWorkingHours.userInfo.jobtitle,this.props.manageUserWorkingHours.userInfo.user_Id}catch(s){}return console.log("this.props.usersList",this.props.usersList),u.a.createElement("div",null,u.a.createElement(h.a,this.props),u.a.createElement("div",{id:"content",className:"app-content box-shadow-z0",role:"main"},u.a.createElement(b.a,{pageTitle:"Manage Employees Working Hours"+e,showLoading:this.props.frontend.show_loading,userListHeader:!0}),u.a.createElement(f.a,{users:this.props.usersList.users,selectedUserId:this.state.selected_user_id,onUserClick:this.onUserClick}),u.a.createElement("div",{className:"app-body",id:"view"},u.a.createElement("div",{className:"padding"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-sm-3 hidden-xs",id:"fixedScroll"},u.a.createElement(E.a,{users:this.props.usersList.users,selectedUserId:this.state.defaultUserDisplay,onUserClick:this.onUserClick,top:10})),u.a.createElement("div",{className:"col-md-9 col-xs-12 col-sm-9"},u.a.createElement("div",{className:"box"},u.a.createElement("div",{className:"item"},u.a.createElement("div",{className:"item-bg"},u.a.createElement("img",{src:t,className:"blur"})),u.a.createElement("div",{className:"p-a-lg pos-rlt text-center"},u.a.createElement("img",{src:t,className:"img-circle w-56"}))),u.a.createElement("div",{className:"p-a text-center"},u.a.createElement("a",{href:"",className:"text-md m-t block"},a),u.a.createElement("p",null,u.a.createElement("small",null,r)))),u.a.createElement("div",{className:"row no-gutter b-t box "},u.a.createElement("div",{className:"col-md-9 col-xs-12 b-r box"},u.a.createElement("div",{className:"p-a block"},u.a.createElement("h6",{className:"text-center"},"Add New"),u.a.createElement("hr",null),u.a.createElement(W,Object.assign({},this.props,{userid:this.state.defaultUserDisplay,callAddUserWorkingHours:this.callAddUserWorkingHours})))),u.a.createElement("div",{className:"col-md-3 col-xs-12  b-r box "},u.a.createElement("div",{className:"p-a block "},u.a.createElement("h6",{className:"text-center"},"Existing Working Hours"),u.a.createElement("hr",null),u.a.createElement("div",{className:"hour-overflow "},u.a.createElement(w,{displayData:this.props.manageUserWorkingHours.displayData})))))))))))}}]),t}(u.a.Component);var J=Object(m.b)(function(e){return{frontend:e.frontend.toJS(),loggedUser:e.logged_user.userLogin,usersList:e.usersList.toJS(),manageUserWorkingHours:e.manageUserWorkingHours.toJS()}},function(e){return{onIsAlreadyLogin:function(){return e(H.isAlreadyLogin())},onUsersList:function(){return e(S.c())},onUserWorkingHoursData:function(t){return e(P(t))},onAddUserWorkingHours:function(t,a,r,s){return e(T(t,a,r,s))}}})(q),M=Object(d.a)(J);t.default=M}}]);
//# sourceMappingURL=28.55af7d95.chunk.js.map