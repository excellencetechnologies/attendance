(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1088:function(e,t,a){"use strict";a.r(t);var n=a(25),l=a(26),s=a(29),c=a(27),r=a(28),i=a(0),o=a.n(i),u=a(36),m=a(1073),d=a(123),p=a(37),v=a(254),b=a(12),f=a(9),h=a(124),E=a.n(h),O=a(43),y=a(23),_=a(1),g=a.n(_),j=function(e){var t=e.leave,a=e.handleOpen,n=e.cancelLeave,l=t.status,s=l.charAt(0),c="";return"Approved"===l?c="green-A200":"Pending"===l?c="blue":"Rejected"===l?c="red-500":"Cancelled Request"===l&&(c="red-100"),o.a.createElement("div",{className:"list-item b-l b-l-2x b-".concat(c)},o.a.createElement("div",{className:"list-left"},o.a.createElement("span",{className:"w-40 avatar ".concat(c)},s)),o.a.createElement("div",{className:"list-body"},o.a.createElement("div",{className:"pull-right text-muted text-xs"}),o.a.createElement("div",null,o.a.createElement("span",{className:"_500"},"Status : ",t.status)),o.a.createElement("div",null,o.a.createElement("span",{className:"_500"},"Apply on : ",t.applied_on)),o.a.createElement("div",null,o.a.createElement("span",{className:"_500"},"From ",t.from_date," to ",t.to_date),"\xa0\xa0\xa0",o.a.createElement("span",{className:"label cyan"},t.no_of_days," Day"),o.a.createElement("span",{className:"label cyan m-l-xs",onClick:function(){return n(t.user_Id,t.from_date)}},"Cancel")),o.a.createElement("div",{className:"text-ellipsis text-muted text-sm"},"Reason : ",t.reason),""!==t.leave_type?o.a.createElement("div",{className:"text-ellipsis text-muted text-sm"},"Leave Type : ",t.leave_type):null,""!==t.late_reason?o.a.createElement("div",{className:"text-ellipsis text-muted text-sm"},"Reason For Late Applying : ",t.late_reason):null,""!==t.comment?o.a.createElement("div",{className:"text-ellipsis text-muted text-sm"},"comment : ",t.comment):null),o.a.createElement("div",{className:"row"},"0"!==t.doc_require?o.a.createElement("div",{className:"col-xs-12 row"},o.a.createElement("button",{onClick:function(){a(t.id)},className:"btn btn-info btn-responsive btn-res col-xs-2"},"Upload Leave Document"),""===t.doc_link?null:o.a.createElement("div",null,o.a.createElement("form",{method:"get",target:"_blank",action:t.doc_link},o.a.createElement("button",{className:"btn btn-primary btn-responsive btn-res col-xs-2"},"View Document"))),o.a.createElement("div",{className:"col-xs-12 row"},o.a.createElement("small",{className:"uploadnotic"},"* Upload file size should be less than 1 MB"))):null))};j.PropTypes={leave:g.a.shape({status:g.a.string.isRequired,applied_on:g.a.string.isRequired,from_date:g.a.string.isRequired,to_date:g.a.string.isRequired,no_of_days:g.a.number.isRequired,user_Id:g.a.number.isRequired,reason:g.a.string.isRequired,leave_type:g.a.string.isRequired,late_reason:g.a.string.isRequired,comment:g.a.string.isRequired}).isRequired,handleOpen:g.a.func.isRequired,cancelLeave:g.a.func.isRequired};var N=j,L=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).state={open:!1,id:"",user_token:""},a.cancelLeave=a.cancelLeave.bind(Object(b.a)(Object(b.a)(a))),a.handleOpen=a.handleOpen.bind(Object(b.a)(Object(b.a)(a))),a.handleClose=a.handleClose.bind(Object(b.a)(Object(b.a)(a))),a.callUpdateDocuments=a.callUpdateDocuments.bind(Object(b.a)(Object(b.a)(a))),a}return Object(r.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({user_token:Object(p.c)()})}},{key:"cancelLeave",value:function(e,t){this.props.onCancelLeave(e,t).then(function(e){Object(O.b)(e)}).catch(function(e){Object(O.b)(e)})}},{key:"handleOpen",value:function(e){this.setState({open:!0,id:e})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"callUpdateDocuments",value:function(e){var t=!1;""===this.refs.file.value&&(t=!0,Object(O.b)("Please select a file")),t&&e.preventDefault()}},{key:"render",value:function(){var e=this,t=window.location.href,a=f.map(this.props.userLeaves.leaves,function(t,a){return o.a.createElement(N,{key:a,leave:t,handleOpen:e.handleOpen,cancelLeave:e.cancelLeave})});return o.a.createElement("div",{className:"row"},o.a.createElement(E.a,{title:"Upload Leave Document",modal:!1,open:this.state.open,onRequestClose:this.handleClose,contentClassName:"dialog-content",autoScrollBodyContent:!0},o.a.createElement("div",null,o.a.createElement("form",{action:y.a.upload_leave_url,method:"POST",encType:"multipart/form-data"},o.a.createElement("input",{type:"hidden",name:"token",value:this.state.user_token}),o.a.createElement("input",{type:"hidden",name:"leaveid",value:this.state.id}),o.a.createElement("input",{type:"hidden",name:"page_url",value:t}),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Attachment"),o.a.createElement("input",{type:"file",className:"form-control",ref:"file",name:"docProof"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"submit",name:"submit",value:"Upload",className:"col-xs-12 md-btn md-raised indigo",onClick:function(t){e.callUpdateDocuments(t)}}))))),o.a.createElement("div",{className:"row-col"},o.a.createElement("div",{className:"list white"},a)))}}]),t}(o.a.Component),w=a(5),x=a(1112),k=(a(128),a(11)),R=a(2),q=a(31);function C(){return function(e,t){return new Promise(function(t,a){e(Object(q.b)()),Object(k.b)("POST","",{action:"get_my_leaves"}).then(function(t){var a;e(Object(q.a)()),0==t.error?e((a=t.data,Object(x.a)(R.tb)(a))):e((t.data.message,Object(x.a)(R.rb)([])))},function(t){e(Object(q.a)()),e((t.data.message,Object(x.a)(R.sb)("Error Occurs !!")))})})}}function P(e,t){return function(a,n){return new Promise(function(n,l){a(Object(q.b)()),function(e,t){return Object(k.b)("POST","",{action:"cancel_applied_leave",user_id:e,date:t})}(e,t).then(function(e){a(Object(q.a)()),0==e.error?a(C()):l(e.data.message)},function(e){a(Object(q.a)()),l(e.data.message)})})}}var S=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).props.onIsAlreadyLogin(),a}return Object(r.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.props.onMyLeavesList()}},{key:"componentWillReceiveProps",value:function(e){window.scrollTo(0,0);var t=Object(p.e)(this.props.location.pathname,e.loggedUser);t.status&&this.props.history.push(t.redirectTo)}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(d.a,this.props),o.a.createElement("div",{id:"content",className:"app-content box-shadow-z0",role:"main"},o.a.createElement(v.a,{pageTitle:"My Leaves",showLoading:this.props.frontend.show_loading}),o.a.createElement("div",{className:"app-body",id:"view"},o.a.createElement("div",{className:"padding"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12"},o.a.createElement(L,this.props)))))))}}]),t}(o.a.Component);var U=Object(u.b)(function(e){return{frontend:e.frontend.toJS(),loggedUser:e.logged_user.userLogin,userLeaves:e.userLeaves.toJS(),applyLeave:e.applyLeave.toJS()}},function(e){return{onIsAlreadyLogin:function(){return e(w.isAlreadyLogin())},onMyLeavesList:function(){return e(C())},onCancelLeave:function(t,a){return e(P(t,a))}}})(S),A=Object(m.a)(U);t.default=A}}]);
//# sourceMappingURL=13.091143af.chunk.js.map